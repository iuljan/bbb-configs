---
location: k9-nonpub
location_nice: Kinzig9
latitude: 52.51378093260403
longitude: 13.466068518122656
altitude: 60
contact_nickname: 'K9 Freifunk Team'
contacts:
  - 'freifunk@kinzig9.de'

hosts:
  - hostname: k9ap-10  # Hendrik
    description: VH3L2R
    role: ap
    model: "tplink_archer-c7-v5"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-12  # Anna-lea
    description: VH1R1R
    role: ap
    model: "cudy_wr3000h-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-13 # Katrin
    description: HH2.2
    role: ap
    model: "cudy_wr3000h-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-18 # Heinz
    description: SF.1
    role: ap
    model: "cudy_wr3000s-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-24 # G-Raum 1.OG
    description: VH1L2L
    role: ap
    model: "cudy_wr3000h-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-28 # Mika
    description: 5HR1L
    role: ap
    model: "cudy_wr3000h-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-30 # Juergen Schlaf
    description: VH4R1R
    role: ap
    model: "cudy_wr3000h-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-31 # SF Kueche
    description: SF.2
    role: ap
    model: "tplink_archer-c7-v5"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-33 # ehemals Kerrin
    description: VH2R2R
    role: ap
    model: "tplink_archer-c7-v5"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-34 # Buero
    description: SF.0
    role: ap
    model: "dlink_dap-x1860-a1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-35 # 4.OG G-Raum
    description: VH4L2L
    role: ap
    model: "cudy_wr3000h-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-36 # Ronja
    description: 5VL2R
    role: ap
    model: "dlink_dap-x1860-a1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-37 # Luisa
    description: VH2L2R
    role: ap
    model: "dlink_dap-x1860-a1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-38 # Katja
    description: VH3R2R
    role: ap
    model: "cudy_wr3000h-v1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-39 # 5.OG Kueche
    description: 5HKUECHE
    role: ap
    model: "dlink_dap-x1860-a1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-40 # Hannah
    description: HH4.1
    role: ap
    model: "dlink_covr-x1860-a1"
    wireless_profile: k9+freifunk
    wifi_roaming: true

  - hostname: k9ap-41 # Percy
    description: HH3.3
    role: ap
    model: "dlink_covr-x1860-a1"
    wireless_profile: k9+freifunk
    wifi_roaming: true


ipv6_prefix: '2001:bf7:830:8d00::/56'

# K9 Prefixes:
# 10.31.9.0/24

# - 10.31.9.0/25 - DHCP
# - 10.31.9.224/28 - BBB-Mesh
# - 10.31.9.240/28 - MGMT

networks:

  # DHCP
  - vid: 40
    role: dhcp
    inbound_filtering: true
    enforce_client_isolation: true
    prefix: 10.31.9.0/25
    ipv6_subprefix: 0
    assignments:
      k9-core: 1

  - vid: 1
    name: k9_dhcp
    role: ext
    prefix: 172.17.9.0/24
    gateway: 1
    broadcast: 172.17.9.255
    dns:
      - '172.16.9.5'
      - '172.16.9.126'
    no_corerouter_dns_record: true
    enforce_client_isolation: false
    # inbound_filtering: true
    untagged: true
    assignments:
      k9ap-10: 10 # Hendrik
      k9ap-12: 12 # Anna-lea
      k9ap-13: 13 # Katrin
      k9ap-18: 18 # Heinz
      k9ap-24: 24 # 1.OG GRaum
      k9ap-31: 28 # Mika
      k9ap-30: 30 # Juergen Schlaf
      k9ap-31: 31 # SF Kueche
      k9ap-33: 33 # ehemals Kerrin
      k9ap-34: 34 # Buero
      k9ap-35: 35 # 4.OG G-Raum
      k9ap-36: 36 # Ronja
      k9ap-37: 37 # Luisa
      k9ap-38: 38 # Katja
      k9ap-39: 39 # 5.OG Kueche
      k9ap-40: 40 # Hannah
      k9ap-41: 41 # Percy

location__wireless_profiles__to_merge:
  - name: k9+freifunk
    ifaces:
      - mode: ap
        ssid: berlin.freifunk.net
        encryption: none
        network: dhcp
        radio: [11a_standard, 11g_standard]
        ifname_hint: ff
        owe_transition_ifname_hint: ffowe

      - mode: ap
        ssid: berlin.freifunk.net Encrypted
        encryption: owe
        network: dhcp
        radio: [11a_standard, 11g_standard]
        ifname_hint: ffowe
        owe_transition_ifname_hint: ff
        ieee80211w: 1 # 1 optional, 2 required

      - mode: ap
        ssid: k9wlan-neu
        encryption: sae-mixed
        key: 'file:/root/wifi_pass' # erst PW ablegen dann flashen
        network: k9_dhcp
        radio: [11a_standard, 11g_standard]
        ifname_hint: k9

      - mode: mesh
        mesh_id: Mesh-Freifunk-Berlin
        radio: [11a_standard, 11g_standard, 11a_mesh]
        mcast_rate: 12000
        mesh_fwding: 0
        ifname_hint: mesh

ssh_keys:
  - comment: k9 iuljan
    key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINYwzmfKo1lXqBQFp7Ja26smNf0vMDZ8YTDWos3hO5jZ openwrt-k9@julian-m3
  - comment: k9 openwrt-vm
    key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJB+iuUg9LllHVecQ/PybZ4hGAfFwS4NbqU9gpt4TMV2 openwrt-vm